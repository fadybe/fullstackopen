(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(14),o=t.n(a),r=(t(19),t(3)),u=t(4),i=t.n(u),s="/api",d=function(){return i.a.get("".concat(s,"/persons")).then((function(e){return e.data}))},l=function(e){return i.a.post("".concat(s,"/persons"),e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(s,"/persons/").concat(e))},b=function(e,n){return i.a.put("".concat(s,"/persons/").concat(e),n).then((function(e){return e.data}))},h=t(0),j=function(e){var n=e.contacts,t=e.deleteContact;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(h.jsxs)("div",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:function(){t(e.id)},children:"delete"})]},e.id)}))]})},m=function(e){var n=e.nameValue,t=e.numberValue,c=e.handleNameChange,a=e.handleNumberChange,o=e.addNewContact;return Object(h.jsxs)("form",{onSubmit:o,children:[Object(h.jsx)("h2",{children:"Add new contact"}),Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:n,onChange:c})]}),Object(h.jsxs)("div",{children:["Phone: ",Object(h.jsx)("input",{value:t,onChange:a})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{children:"Add"})})]})},v=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"error",children:n})},O=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(null),u=Object(r.a)(o,2),i=u[0],s=u[1],O=Object(c.useState)(""),p=Object(r.a)(O,2),x=p[0],w=p[1],g=Object(c.useState)(""),C=Object(r.a)(g,2),y=C[0],N=C[1],k=Object(c.useState)([]),S=Object(r.a)(k,2),V=S[0],A=S[1],E=Object(c.useState)(""),J=Object(r.a)(E,2),L=J[0],P=J[1];Object(c.useEffect)((function(){d().then((function(e){a(e),A(e)}))}),[]);var B=function(e){return""===e?t:t.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}))},D=function(e){s(e),setTimeout((function(){s(null)}),5e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)(v,{message:i}),Object(h.jsxs)("div",{children:["Search: ",Object(h.jsx)("input",{value:L,onChange:function(e){P(e.target.value),A(B(e.target.value))}})]}),Object(h.jsx)(m,{nameValue:x,numberValue:y,handleNameChange:function(e){return w(e.target.value)},handleNumberChange:function(e){return N(e.target.value)},addNewContact:function(e){e.preventDefault();var n={name:x,number:y},c=t.find((function(e){return e.name===n.name})),o=t.find((function(e){return e.number===n.number}));if(void 0!==c||void 0!==o){if(void 0!==c){var r="".concat(n.name," already exist in the phonebook with phone number: ").concat(c.number,", want to update phone number?");window.confirm(r)&&b(c.id,n).then((function(e){var n=t.filter((function(e){return e.id!==c.id}));a(n.concat(e)),A(n.concat(e)),D("contact ".concat(e.name," successfully from server."))})).catch((function(e){console.log("=======================================")}))}else if(o){var u="".concat(n.number," already exist in the phonebook with name: ").concat(o.name,", want to update name?");window.confirm(u)&&b(o.id,n).then((function(e){var n=t.filter((function(e){return e.id!==o.id}));a(n.concat(e)),A(n.concat(e)),D("contact ".concat(e.name," successfully from server."))}))}}else l(n).then((function(e){a(t.concat(e)),A(t.concat(e)),D("contact ".concat(e.name," successfully created."))})).catch((function(e){D(e.response.data.error.message)}));w(""),N(""),P("")}}),Object(h.jsx)(j,{contacts:V,deleteContact:function(e){var n;t.forEach((function(t){t.id===e&&(n=t.name)})),window.confirm("Are you sure you want to delete ".concat(n,"'s contact?"))&&f(e).then((function(){D("contact deleted successfully from server.")})).catch((function(e){D("Contact is already deleted from the server.")})).finally((function(){a(t.filter((function(n){return n.id!==e}))),A(V.filter((function(n){return n.id!==e})))}))}})]})};o.a.render(Object(h.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.7dc269b9.chunk.js.map